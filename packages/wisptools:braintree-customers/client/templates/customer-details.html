<template name="wtBraintreeCustomerDetails">
  <div class="bg-secondary app-page">
    <div class="container">
      {{#if customer}}
      {{#with customer}}
      <h3>Braintree Customer ({{ customerId }})</h3><hr />
      <div class="row">
        <table class="table table-bordered">
          <tbody>
            <tr><th>Customer Id</th><td>{{ customerId }}</td></tr>
            <tr><th>Name</th><td>{{ firstName }} {{ lastName }}</td></tr>
            <tr><th>Phone</th><td>{{ phone }}</td></tr>
            <tr><th>Email</th><td>{{ email }}</td></tr>
            <tr><th>Address</th><td>{{ address }}</td></tr>
            <tr><th>City</th><td>{{ city }}</td></tr>
            <tr><th>State</th><td>{{ state }}</td></tr>
            <tr><th>Zip</th><td>{{ zip }}</td></tr>
            <tr><th>Domain</th><td>{{ domain }}</td></tr>
            <tr><th>Created</th><td>{{ createdAt }}</td></tr>
          </tbody>
        </table>
      </div>
      {{/with}}
      {{else}}
      <div class="row">
        <div class="alert alert-danger" role="alert">
          Customer not found.
        </div>
      </div>
      {{/if}}
      <h4>Payment Methods</h4>
      <div class="row">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Type</th>
              <th>Name</th>
              <th>Number</th>
              <th>Expiry</th>
              <th>Subscriptions</th>
            </tr>
          </thead>
          <tbody>
            {{#if paymentmethods}}
            {{#each paymentmethods}}
            <tr>
              <td>{{cardType}}</td>
              <td>{{cardholderName}}</td>
              <td>{{maskedNumber}}</td>
              <td>{{expirationDate}}</td>
              <td>{{count subscriptions}}</td>
            </tr>
            {{/each}}
            {{else}}
            <tr>
              <td colspan="5">No Payment Methods</td>
            </tr>
            {{/if}}
          </tbody>
        </table>
      </div>
      <h4>Subscriptions</h4>
      <div class="row">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Plan</th>
              <th>Price</th>
              <th>Billing Period</th>
              <th>Balance</th>
              <th>Next Bill Amount</th>
              <th>Next Billing Date</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {{#if subscriptions}}
            {{#each subscriptions}}
            <tr>
              <td>{{planName planId}}</td>
              <td>{{price}}</td>
              <td>{{billingPeriodStartDate}} to {{billingPeriodEndDate}}</td>
              <td>{{balance}}</td>
              <td>{{nextBillAmount}}</td>
              <td>{{nextBillingDate}}</td>
              <td>{{status}}</td>
            </tr>
            {{/each}}
            {{else}}
            <tr>
              <td colspan="7">No Subscriptions</td>
            </tr>
            {{/if}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</template>
