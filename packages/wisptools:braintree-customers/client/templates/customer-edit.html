<template name="wtBraintreeEditCustomer">
  <div class="bg-secondary app-page">
    <div class="container">
      {{#if customer}}
      {{#with customer}}
      <h3>{{ showTitle }} <span class="pull-right">{{ customerId }}</span></h3><hr />
      <div class="row">
        <form class="form-horizontal col-md-8">
          <div class="form-group">
            <label for="firstname" class="col-sm-3 control-label">First Name</label>
            <div class="col-sm-6">
              {{ > wtBraintreeClickToEdit fieldName="firstName" fieldValue=firstName fieldPlaceholder="First Name" }}
            </div>
          </div>
          <div class="form-group">
            <label for="lastname" class="col-sm-3 control-label">Last Name</label>
            <div class="col-sm-6">
              {{ > wtBraintreeClickToEdit fieldName="lastName" fieldValue=lastName fieldPlaceholder="Last Name" }}
            </div>
          </div>
          <div class="form-group">
            <label for="companyname" class="col-sm-3 control-label">Company Name</label>
            <div class="col-sm-6">
              {{ > wtBraintreeClickToEdit fieldName="company" fieldValue=company fieldPlaceholder="Company Name" }}
            </div>
          </div>
          <div class="form-group">
            <label for="phone" class="col-sm-3 control-label">Phone</label>
            <div class="col-sm-6">
              {{ > wtBraintreeClickToEdit fieldName="phone" fieldValue=phone fieldPlaceholder="Phone" }}
            </div>
          </div>
          <div class="form-group">
            <label for="email" class="col-sm-3 control-label">Email</label>
            <div class="col-sm-6">
              {{ > wtBraintreeClickToEdit fieldName="email" fieldValue=email fieldPlaceholder="Email" }}
            </div>
          </div>
          <div class="form-group">
            <label for="address" class="col-sm-3 control-label">Address</label>
            <div class="col-sm-6">
              {{ > wtBraintreeClickToEdit fieldName="address" fieldValue=address fieldPlaceholder="Address" }}
            </div>
          </div>
          <div class="form-group">
            <label for="city" class="col-sm-3 control-label">City</label>
            <div class="col-sm-6">
              {{ > wtBraintreeClickToEdit fieldName="city" fieldValue=city fieldPlaceholder="City" }}
            </div>
          </div>
          <div class="form-group">
            <label for="state" class="col-sm-3 control-label">State</label>
            <div class="col-sm-6">
              {{ > wtBraintreeClickToEdit fieldName="state" fieldValue=state fieldPlaceholder="State" }}
            </div>
          </div>
          <div class="form-group">
            <label for="zip" class="col-sm-3 control-label">Zip</label>
            <div class="col-sm-6">
              {{ > wtBraintreeClickToEdit fieldName="zip" fieldValue=zip fieldPlaceholder="Zip" }}
            </div>
          </div>
        </form>
      </div>
      {{/with}}
      {{else}}
      <div class="row">
        <div class="alert alert-danger" role="alert">
          Customer not found.
        </div>
      </div>
      {{/if}}
      <h4>Payment Methods</h4>
      <div class="row">
      {{#if showPaymentAddForm}}
        {{ > wtBraintreeAddPaymentMethodForm }}
      {{else}}
        <button class="btn btn-success addCreditCardBtn pull-right">Add Credit Card</button><br><br>
      {{/if}}
      </div>
      {{#if paymentmethods}}
      {{#each paymentmethods}}
        <div class="row">
          {{ > wtBraintreePaymentMethodPanel}}
        </div>
      {{/each}}
      {{/if}}
      {{#if showPaymentEditForm}}
      <div class="row">
        {{ > wtBraintreeEditPaymentMethodForm }}
      </div>
      {{/if}}
    </div>
  </div>
</template>

<template name="wtBraintreeClickToEdit">
  <div class="click-to-edit-area">
    {{#if isEditing fieldName}}
      <input type="text" class="form-control" id="{{ fieldName }}" placeholder="{{ fieldPlaceholder }}" value="{{ fieldValue }}">
    {{else}}
      <p class="form-control-static editable">
        {{ fieldValue }} &nbsp;
        {{> wtEditableIcon}}
      </p>
    {{/if}}
  </div>
</template>

<template name="wtBraintreePaymentMethodPanel">
  <div class="panel {{#if isEdit}}panel-warning{{else}}panel-default{{/if}}">
    <div class="panel-heading">
      {{ cardholderName }}
      <span class="pull-right">
        <span class="pull-left">
          {{ maskedNumber }} ({{ cardType }})<br>
          <span class="pull-right">Exp: {{ expirationDate }}</span>
        </span>&nbsp;&nbsp;&nbsp;
        <span class="pull-right">
          {{#if isEdit}}
          <button class="btn btn-warning cancelEditPaymentMethod">Cancel</button>
          {{else}}
          <button class="btn btn-primary editPaymentMethod">Edit</button>
          {{/if}}
        </span>
      </span>
      <br><br>
    </div>
    <div class="panel-body">
      {{#if subscriptions}}
      {{#each subscriptions}}
        {{ > wtBraintreeSubscriptionPanel}}
      {{/each}}
      {{/if}}
      {{ > wtBraintreeAddSubscriptionPanel}}
    </div>
  </div>
</template>

<template name="wtBraintreeSubscriptionPanel">
  <div class="col-md-3">
    <div class="panel {{#if isActive}}panel-success{{else}}panel-danger{{/if}}">
      <div class="panel-heading">
        {{planName}}
        <span class="pull-right">${{price}}</span>
      </div>
      <div class="panel-body">
        Billing Period: {{billingPeriodStartDate}} to {{billingPeriodEndDate}}<br>
        Balance : {{balance}}<br>
        Next Bill Amount: {{nextBillAmount}}<br>
        Next Billing Date: {{nextBillingDate}}<br>
        Status: {{status}}<br>
        {{#if isActive}}
        <button class="btn btn-danger cancelSubscription">Cancel</button>
        {{/if}}
      </div>
    </div>
  </div>
</template>

<template name="wtBraintreeAddSubscriptionPanel">
  <div class="col-md-3">
    <div class="panel panel-default">
      <div class="panel-heading">
        Create Subscription
      </div>
      <div class="panel-body">
        <form class="form-inline">
          <div class="form-group">
            <select class="form-control">
              {{#each plans}}
              <option value="{{id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>
          <button type="submit" class="btn btn-default createSubscriptionBtn">Create Subscription</button>
        </form>
      </div>
    </div>
  </div>
</template>
