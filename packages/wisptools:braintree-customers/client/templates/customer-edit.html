<template name="wtBraintreeEditCustomer">
  <div class="bg-secondary app-page">
    <div class="container">
      {{#if customer}}
      {{#with customer}}
      <h3>Update Braintree Customer ({{ customerId }})</h3><hr />
      <div class="row">
        <form class="form-horizontal col-md-8">
          <div class="form-group">
            <label for="firstname" class="col-sm-2 control-label">First Name</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="firstname" placeholder="First Name" value="{{ firstName }}">
            </div>
          </div>
          <div class="form-group">
            <label for="lastname" class="col-sm-2 control-label">Last Name</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="lastname" placeholder="Last Name" value="{{ lastName }}">
            </div>
          </div>
          <div class="form-group">
            <label for="phone" class="col-sm-2 control-label">Phone</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="phone" placeholder="Phone" value="{{ phone }}">
            </div>
          </div>
          <div class="form-group">
            <label for="email" class="col-sm-2 control-label">Email</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="email" placeholder="Email" value="{{ email }}">
            </div>
          </div>
          <div class="form-group">
            <label for="address" class="col-sm-2 control-label">Address</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="address" placeholder="Address" value="{{ address }}">
            </div>
          </div>
          <div class="form-group">
            <label for="city" class="col-sm-2 control-label">City</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="city" placeholder="City" value="{{ city }}">
            </div>
          </div>
          <div class="form-group">
            <label for="state" class="col-sm-2 control-label">State</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="state" placeholder="State" value="{{ state }}">
            </div>
          </div>
          <div class="form-group">
            <label for="zip" class="col-sm-2 control-label">Zip</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="zip" placeholder="Zip" value="{{ zip }}">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button class="btn btn-primary updateCustomer">Update Customer</button>
            </div>
          </div>
        </form>
      </div>
      {{/with}}
      {{else}}
      <div class="row">
        <div class="alert alert-danger" role="alert">
          Customer not found.
        </div>
      </div>
      {{/if}}
      <h4>Payment Methods</h4>
      <div class="row">
        {{ > wtBraintreeAddPaymentMethodForm }}
      </div>
      <div class="row">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Type</th>
              <th>Name</th>
              <th>Number</th>
              <th>Expiry</th>
              <th>Subscriptions</th>
              <th colspan="2">Actions</th>
            </tr>
          </thead>
          <tbody>
            {{#if paymentmethods}}
            {{#each paymentmethods}}
            <tr class="{{#if isEdit}}warning{{/if}}">
              <td>{{cardType}}</td>
              <td>{{cardholderName}}</td>
              <td>{{maskedNumber}}</td>
              <td>{{expirationDate}}</td>
              <td>{{subscriptionscount}}</td>
              <td>
                <form class="form-inline">
                  <div class="form-group">
                    <select class="form-control">
                      {{#each plans}}
                      <option value="{{id}}">{{name}}</option>
                      {{/each}}
                    </select>
                  </div>
                  <button type="submit" class="btn btn-default createSubscriptionBtn">Create Subscription</button>
                </form>
              </td>
              <td>
                {{#if isEdit}}
                <button class="btn btn-warning cancelEditPaymentMethod">Cancel</button>
                {{else}}
                <button class="btn btn-primary editPaymentMethod">Edit</button>
                {{/if}}
              </td>
            </tr>
            {{/each}}
            {{else}}
            <tr>
              <td colspan="6">No Payment Methods</td>
            </tr>
            {{/if}}
          </tbody>
        </table>
      </div>
      {{#if showPaymentEditForm}}
      <div class="row">
        {{ > wtBraintreeEditPaymentMethodForm }}
      </div>
      {{/if}}
      <h4>Subscriptions</h4>
      <div class="row">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Plan</th>
              <th>Price</th>
              <th>Billing Period</th>
              <th>Balance</th>
              <th>Next Bill Amount</th>
              <th>Next Billing Date</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {{#if subscriptions}}
            {{#each subscriptions}}
            <tr>
              <td>{{planName planId}}</td>
              <td>{{price}}</td>
              <td>{{billingPeriodStartDate}} to {{billingPeriodEndDate}}</td>
              <td>{{balance}}</td>
              <td>{{nextBillAmount}}</td>
              <td>{{nextBillingDate}}</td>
              <td>{{status}}</td>
            </tr>
            {{/each}}
            {{else}}
            <tr>
              <td colspan="7">No Subscriptions</td>
            </tr>
            {{/if}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</template>
